(function(){function ma(t) {
  var l = 0;
  return function() {
    return l < t.length ? {done:!1, value:t[l++],} : {done:!0};
  };
}
var na = "function" == typeof Object.defineProperties ? Object.defineProperty : function(t, l, w) {
  if (t == Array.prototype || t == Object.prototype) {
    return t;
  }
  t[l] = w.value;
  return t;
};
function pb(t) {
  t = ["object" == typeof globalThis && globalThis, t, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global,];
  for (var l = 0; l < t.length; ++l) {
    var w = t[l];
    if (w && w.Math == Math) {
      return w;
    }
  }
  throw Error("Cannot find global object");
}
var Gb = pb(this);
function Hb(t, l) {
  if (l) {
    a: {
      for (var w = Gb, d = t.split("."), m = 0; m < d.length - 1; m++) {
        var n = d[m];
        if (!(n in w)) {
          break a;
        }
        w = w[n];
      }
      d = d[d.length - 1];
      m = w[d];
      n = l(m);
      n != m && null != n && na(w, d, {configurable:!0, writable:!0, value:n});
    }
  }
}
Hb("Symbol", function(t) {
  function l(n) {
    if (this instanceof l) {
      throw new TypeError("Symbol is not a constructor");
    }
    return new w(d + (n || "") + "_" + m++, n);
  }
  function w(n, k) {
    this.i = n;
    na(this, "description", {configurable:!0, writable:!0, value:k});
  }
  if (t) {
    return t;
  }
  w.prototype.toString = function() {
    return this.i;
  };
  var d = "jscomp_symbol_" + (1E9 * Math.random() >>> 0) + "_", m = 0;
  return l;
});
Hb("Symbol.iterator", function(t) {
  if (t) {
    return t;
  }
  t = Symbol("Symbol.iterator");
  for (var l = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), w = 0; w < l.length; w++) {
    var d = Gb[l[w]];
    "function" === typeof d && "function" != typeof d.prototype[t] && na(d.prototype, t, {configurable:!0, writable:!0, value:function() {
      return ec(ma(this));
    }});
  }
  return t;
});
function ec(t) {
  t = {next:t};
  t[Symbol.iterator] = function() {
    return this;
  };
  return t;
}
function fc(t, l) {
  t instanceof String && (t += "");
  var w = 0, d = !1, m = {next:function() {
    if (!d && w < t.length) {
      var n = w++;
      return {value:l(n, t[n]), done:!1};
    }
    d = !0;
    return {done:!0, value:void 0};
  }};
  m[Symbol.iterator] = function() {
    return m;
  };
  return m;
}
Hb("Array.prototype.keys", function(t) {
  return t ? t : function() {
    return fc(this, function(l) {
      return l;
    });
  };
});
Hb("Array.from", function(t) {
  return t ? t : function(l, w, d) {
    w = null != w ? w : function(r) {
      return r;
    };
    var m = [], n = "undefined" != typeof Symbol && Symbol.iterator && l[Symbol.iterator];
    if ("function" == typeof n) {
      l = n.call(l);
      for (var k = 0; !(n = l.next()).done;) {
        m.push(w.call(d, n.value, k++));
      }
    } else {
      for (n = l.length, k = 0; k < n; k++) {
        m.push(w.call(d, l[k], k));
      }
    }
    return m;
  };
});
function gc(t) {
  var l = "undefined" != typeof Symbol && Symbol.iterator && t[Symbol.iterator];
  return l ? l.call(t) : {next:ma(t)};
}
Hb("Promise", function(t) {
  function l(k) {
    this.l = 0;
    this.s = void 0;
    this.i = [];
    this.Y = !1;
    var r = this.D();
    try {
      k(r.resolve, r.reject);
    } catch (z) {
      r.reject(z);
    }
  }
  function w() {
    this.i = null;
  }
  function d(k) {
    return k instanceof l ? k : new l(function(r) {
      r(k);
    });
  }
  if (t) {
    return t;
  }
  w.prototype.l = function(k) {
    if (null == this.i) {
      this.i = [];
      var r = this;
      this.s(function() {
        r.F();
      });
    }
    this.i.push(k);
  };
  var m = Gb.setTimeout;
  w.prototype.s = function(k) {
    m(k, 0);
  };
  w.prototype.F = function() {
    for (; this.i && this.i.length;) {
      var k = this.i;
      this.i = [];
      for (var r = 0; r < k.length; ++r) {
        var z = k[r];
        k[r] = null;
        try {
          z();
        } catch (F) {
          this.D(F);
        }
      }
    }
    this.i = null;
  };
  w.prototype.D = function(k) {
    this.s(function() {
      throw k;
    });
  };
  l.prototype.D = function() {
    function k(F) {
      return function(H) {
        z || (z = !0, F.call(r, H));
      };
    }
    var r = this, z = !1;
    return {resolve:k(this.xa), reject:k(this.F)};
  };
  l.prototype.xa = function(k) {
    if (k === this) {
      this.F(new TypeError("A Promise cannot resolve to itself"));
    } else {
      if (k instanceof l) {
        this.za(k);
      } else {
        a: {
          switch(typeof k) {
            case "object":
              var r = null != k;
              break a;
            case "function":
              r = !0;
              break a;
            default:
              r = !1;
          }
        }
        r ? this.va(k) : this.V(k);
      }
    }
  };
  l.prototype.va = function(k) {
    var r = void 0;
    try {
      r = k.then;
    } catch (z) {
      this.F(z);
      return;
    }
    "function" == typeof r ? this.Aa(r, k) : this.V(k);
  };
  l.prototype.F = function(k) {
    this.Z(2, k);
  };
  l.prototype.V = function(k) {
    this.Z(1, k);
  };
  l.prototype.Z = function(k, r) {
    if (0 != this.l) {
      throw Error("Cannot settle(" + k + ", " + r + "): Promise already settled in state" + this.l);
    }
    this.l = k;
    this.s = r;
    2 === this.l && this.ya();
    this.$();
  };
  l.prototype.ya = function() {
    var k = this;
    m(function() {
      if (k.ua()) {
        var r = Gb.console;
        "undefined" !== typeof r && r.error(k.s);
      }
    }, 1);
  };
  l.prototype.ua = function() {
    if (this.Y) {
      return !1;
    }
    var k = Gb.CustomEvent, r = Gb.Event, z = Gb.dispatchEvent;
    if ("undefined" === typeof z) {
      return !0;
    }
    "function" === typeof k ? k = new k("unhandledrejection", {cancelable:!0}) : "function" === typeof r ? k = new r("unhandledrejection", {cancelable:!0}) : (k = Gb.document.createEvent("CustomEvent"), k.initCustomEvent("unhandledrejection", !1, !0, k));
    k.promise = this;
    k.reason = this.s;
    return z(k);
  };
  l.prototype.$ = function() {
    if (null != this.i) {
      for (var k = 0; k < this.i.length; ++k) {
        n.l(this.i[k]);
      }
      this.i = null;
    }
  };
  var n = new w();
  l.prototype.za = function(k) {
    var r = this.D();
    k.P(r.resolve, r.reject);
  };
  l.prototype.Aa = function(k, r) {
    var z = this.D();
    try {
      k.call(r, z.resolve, z.reject);
    } catch (F) {
      z.reject(F);
    }
  };
  l.prototype.then = function(k, r) {
    function z(M, O) {
      return "function" == typeof M ? function(P) {
        try {
          F(M(P));
        } catch (y) {
          H(y);
        }
      } : O;
    }
    var F, H, K = new l(function(M, O) {
      F = M;
      H = O;
    });
    this.P(z(k, F), z(r, H));
    return K;
  };
  l.prototype["catch"] = function(k) {
    return this.then(void 0, k);
  };
  l.prototype.P = function(k, r) {
    function z() {
      switch(F.l) {
        case 1:
          k(F.s);
          break;
        case 2:
          r(F.s);
          break;
        default:
          throw Error("Unexpected state: " + F.l);
      }
    }
    var F = this;
    null == this.i ? n.l(z) : this.i.push(z);
    this.Y = !0;
  };
  l.resolve = d;
  l.reject = function(k) {
    return new l(function(r, z) {
      z(k);
    });
  };
  l.race = function(k) {
    return new l(function(r, z) {
      for (var F = gc(k), H = F.next(); !H.done; H = F.next()) {
        d(H.value).P(r, z);
      }
    });
  };
  l.all = function(k) {
    var r = gc(k), z = r.next();
    return z.done ? d([]) : new l(function(F, H) {
      function K(P) {
        return function(y) {
          M[P] = y;
          O--;
          0 == O && F(M);
        };
      }
      var M = [], O = 0;
      do {
        M.push(void 0), O++, d(z.value).P(K(M.length - 1), H), z = r.next();
      } while (!z.done);
    });
  };
  return l;
});
Hb("Promise.prototype.finally", function(t) {
  return t ? t : function(l) {
    return this.then(function(w) {
      return Promise.resolve(l()).then(function() {
        return w;
      });
    }, function(w) {
      return Promise.resolve(l()).then(function() {
        throw w;
      });
    });
  };
});
var hc = "function" == typeof Object.assign ? Object.assign : function(t, l) {
  for (var w = 1; w < arguments.length; w++) {
    var d = arguments[w];
    if (d) {
      for (var m in d) {
        Object.prototype.hasOwnProperty.call(d, m) && (t[m] = d[m]);
      }
    }
  }
  return t;
};
Hb("Object.assign", function(t) {
  return t || hc;
});
Hb("Math.trunc", function(t) {
  return t ? t : function(l) {
    l = Number(l);
    if (isNaN(l) || Infinity === l || -Infinity === l || 0 === l) {
      return l;
    }
    var w = Math.floor(Math.abs(l));
    return 0 > l ? -w : w;
  };
});
(function(t) {
  function l() {
  }
  var w = t.xx;
  w ? l = w.constructor : t.xx = w = new l();
  var d = l.prototype;
  d.module = function(n, k) {
    n = n.replace(/ /g, "");
    var r = n.split("."), z, F = w;
    for (z = 0; z < r.length; z++) {
      void 0 === F[r[z]] && (F[r[z]] = new l()), F = F[r[z]];
    }
    k && k(F);
  };
  d.extend = function(n) {
    for (var k in n) {
      n.hasOwnProperty(k) && (this[k] = n[k]);
    }
  };
  w.imports = [];
  d.fixImports = function() {
    w.imports.forEach(function(n) {
      return n();
    });
    delete w.imports;
  };
  d = t.xx.vars = new l();
  var m = t.location.href.toLowerCase();
  d.URL_base = m.substring(0, m.lastIndexOf("/"));
  d.isLocal = d.debugon = "localhost" === m.substr(m.indexOf("//") + 2, 9);
  d.bkcol = "#fff";
  d.URL_lib = d.isLocal ? "tests" === m.substr(m.indexOf("//") + 12, 5) ? d.URL_base + "/../../../lib/" : 0 < m.indexOf("edu") ? d.URL_base + "/lib/" : d.URL_base + "/../../lib/" : d.URL_base + "/lib/";
  m = t.location.pathname;
  m = m.substring(0, m.lastIndexOf("/") + 1);
  d.relPath = m.substr(1);
  d.docPath = d.relPath + "docs/";
  d.ca = !1;
  d.msgArr = [];
  d.Za = [];
})(window);
xx.module("q", function(t) {
  function l(d) {
    return document.getElementById(d);
  }
  function w(d) {
    return document.querySelectorAll(d);
  }
  t.extend({g:l, u:function(d) {
    return document.querySelector(d);
  }, v:w, ha:function(d, m) {
    "string" === typeof d && (d = l(d));
    var n = document.createEvent("HTMLEvents");
    n.initEvent(m, !0, !1);
    d.dispatchEvent(n);
  }, h:function(d, m, n, k) {
    null == d || void 0 == d ? console.log("element does not exist in delegate()") : ("string" === typeof d && (d = l(d)), d.addEventListener(m, function(r) {
      for (var z = r.target; z && z != this; z = z.parentNode) {
        if (z.matches(n)) {
          k.call(z, r);
          break;
        }
      }
    }, !1));
  }, extend:function(d) {
    d = d || {};
    for (var m = 1; m < arguments.length; m++) {
      if (arguments[m]) {
        for (var n in arguments[m]) {
          arguments[m].hasOwnProperty(n) && (d[n] = arguments[m][n]);
        }
      }
    }
    return d;
  }, ba:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = parseFloat(getComputedStyle(d, null).width.replace("px", ""));
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return parseFloat(getComputedStyle(d, null).width.replace("px", ""));
  }, ka:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = parseFloat(getComputedStyle(d, null).height.replace("px", ""));
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return parseFloat(getComputedStyle(d, null).height.replace("px", ""));
  }, tb:function(d, m) {
    "string" === typeof d && (d = l(d));
    "function" === typeof m && (m = m());
    d.style.width = "string" === typeof m ? m : m + "px";
  }, rb:function(d, m) {
    "string" === typeof d && (d = l(d));
    "function" === typeof m && (m = m());
    d.style.height = "string" === typeof m ? m : m + "px";
  }, Qa:function(d, m, n) {
    d.style.left = m + "px";
    d.style.top = n + "px";
  }, Na:function(d, m) {
    if (d === m) {
      return !0;
    }
    for (; m && m !== d;) {
      m = m.parentNode;
    }
    return m === d;
  }, Ta:function(d) {
    if ("object" === typeof d) {
      var m = Object.keys(d);
      if (0 !== m.length) {
        var n = "";
        m.forEach(function(k) {
          n += k + "=" + d[k] + "&";
        });
        n = n.slice(0, n.length - 1);
        return n = n.replace(/ /g, "%20");
      }
    }
  }, jb:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = parseFloat(getComputedStyle(d, null).top.replace("px", ""));
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return parseFloat(getComputedStyle(d, null).top.replace("px", ""));
  }, eb:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = parseFloat(getComputedStyle(d, null).marginLeft.replace("px", ""));
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return parseFloat(getComputedStyle(d, null).marginLeft.replace("px", ""));
  }, fb:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = parseFloat(getComputedStyle(d, null).marginTop.replace("px", ""));
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return parseFloat(getComputedStyle(d, null).marginTop.replace("px", ""));
  }, cb:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = getComputedStyle(d, null).margin.split(" ").map(function(n) {
        return parseFloat(n);
      });
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return getComputedStyle(d, null).margin.split(" ").map(function(n) {
      return parseFloat(n);
    });
  }, Ra:function(d, m, n) {
    n = void 0 === n ? null : n;
    "string" === typeof d && (d = l(d));
    "string" === typeof m && (m = l(m));
    var k = 0, r = 0;
    n && ("string" === typeof n && (n = l(n)), k += parseInt(getComputedStyle(d, null).marginTop.replace("px", "")), r += parseInt(getComputedStyle(d, null).marginLeft.replace("px", "")), k -= parseInt(getComputedStyle(n, null).marginTop.replace("px", "")), r -= parseInt(getComputedStyle(n, null).marginLeft.replace("px", "")));
    d = d.offsetParent;
    k += parseInt(getComputedStyle(d, null).paddingTop.replace("px", ""));
    for (r += parseInt(getComputedStyle(d, null).paddingLeft.replace("px", "")); d && d !== m;) {
      k += d.offsetTop + parseInt(getComputedStyle(d, null).borderTopWidth.replace("px", "")), r += d.offsetLeft + parseInt(getComputedStyle(d, null).borderLeftWidth.replace("px", "")), d = d.offsetParent;
    }
    return [k, r];
  }, ea:function(d, m) {
    Array.from(w(d)).forEach(function(n) {
      n.classList.remove(m);
    });
  }, ib:function(d) {
    var m = d.offsetWidth;
    d = getComputedStyle(d);
    return m += parseInt(d.marginLeft) + parseInt(d.marginRight);
  }, hb:function(d) {
    var m = d.offsetHeight;
    d = getComputedStyle(d);
    return m += parseInt(d.marginTop) + parseInt(d.marginBottom);
  }, la:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = d.offsetWidth;
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return d.offsetWidth;
  }, Ja:function(d) {
    if (d.classList.contains("nodisplay")) {
      d.style.visibility = "hidden";
      d.classList.remove("nodisplay");
      var m = d.offsetHeight;
      d.classList.add("nodisplay");
      d.style.visibility = "visible";
      return m;
    }
    return d.offsetHeight;
  }});
});
xx.module("common", function(t) {
  function l() {
  }
  function w(e) {
    if (void 0 === e) {
      var f = !0;
      e = "Please wait";
    } else {
      f = void 0 === e.Ha ? !0 : e.Ha, e = void 0 === e.oa || "" == e.oa ? "Please wait" : e.oa;
    }
    Z++;
    u.g("loadmsg").innerHTML = e;
    f && u.g("loadingmask").classList.remove("nodisplay");
    K(u.g("loading"));
  }
  function d() {
    0 >= Z || (Z--, 0 < Z || (u.g("loading").classList.add("nodisplay"), u.g("loadingmask").classList.add("nodisplay")));
  }
  function m(e, f) {
    for (var v = e, B = [], D = /{([^}]+)}/g, I; I = D.exec(v);) {
      B.push(I[1]);
    }
    for (var aa in B) {
      D = B[aa];
      I = D.split(".");
      if (1 < I.length) {
        v = f[I[0]];
        for (var V = 1; V < I.length && void 0 !== v; V++) {
          v = v[I[V]];
        }
      } else {
        v = f[D];
      }
      void 0 === v && (v = "");
      e = e.replace("{" + D + "}", v);
    }
    return e;
  }
  function n(e, f, v) {
    this.sl_cont = u.g(e);
    this.sl_ball = u.g(f);
    this.sl_r = v;
    this.sl_maxRight = u.ba(this.sl_cont) - u.ba(this.sl_ball) - 2;
  }
  function k(e, f, v) {
    v = void 0 === v ? !1 : v;
    e = u.g(e);
    if (v || !e.classList.contains("nodisplay")) {
      u.Qa(e, 0, 0);
      f = u.g(f);
      f.classList.add("nodisplay");
      v = document.body.clientWidth;
      var B = document.body.clientHeight, D = (window.outerHeight - u.ka(e) - 100) / 2 + document.body.scrollTop;
      D -= 10;
      10 > D && (D = 10);
      if (f) {
        var I = u.ka(e);
        B < D + I + 10 && (B = D + I + 10);
        f.style.width = v + "px";
        f.style.height = B + "px";
        f.classList.remove("nodisplay");
      }
      K(e);
    }
  }
  function r(e) {
    if (xx.vars.ca) {
      xx.vars.msgArr.push(e);
    } else if (!1 === u.g("msgbox").classList.contains("nodisplay")) {
      xx.vars.msgArr.push(e);
    } else {
      xx.vars.ca = !0;
      var f = {msg:"testing 123", putleft:!1, bc:"#eee", boxType:0, tmo:!0, callback1:null, callback2:null};
      Object.assign(f, e);
      f.msg = f.msg.replace(/\|/g, "<br>");
      W = f.callback1 || e.callback1;
      U = f.callback2 || e.callback2;
      Wa = f.tmo;
      if ("g" === f.bc) {
        f.bc = "#8f8";
      } else if ("w" === f.bc) {
        f.bc = "#f94";
      } else if ("b" === f.bc) {
        f.bc = "#f66";
      } else if ("h" === f.bc) {
        f.bc = "#ff8";
      } else if (void 0 === f.bc || null === f.bc) {
        f.bc = "#eee";
      }
      e = u.g("msgbox");
      e.style.backgroundColor = f.bc;
      var v = e.querySelector(".bmessage");
      v.innerHTML = f.msg;
      f.putleft && (v.style.textAlign = "left");
      0 === f.boxType ? (e.querySelector("#msgButton").classList.remove("nodisplay"), e.querySelector("#msgButton button").focus()) : 1 === f.boxType && (e.querySelector("#yesnoButtons").classList.remove("nodisplay"), e.querySelector("#yesnoButtons button").focus());
      e.style.width = "auto";
      v = u.ba(e);
      200 > v ? e.style.width = "200px" : 800 < v && (e.style.width = "800px");
      k("msgbox", "msgboxmask", !0);
      0 === f.boxType ? e.querySelector("#msgButton button").focus() : 1 === f.boxType && e.querySelector("#yesnoButtons button").focus();
      xx.vars.ca = !1;
    }
  }
  function z(e, f) {
    e.preventDefault();
    var v = "No" !== f.innerHTML;
    u.g("msgbox").classList.add("nodisplay");
    u.g("msgButton").classList.add("nodisplay");
    u.g("yesnoButtons").classList.add("nodisplay");
    Wa && u.g("msgboxmask").classList.add("nodisplay");
    null != W && v ? (W(), W = null) : null != U && (U(), U = null);
    0 < xx.vars.msgArr.length && (v = xx.vars.msgArr.shift(), r(v));
  }
  function F(e) {
    for (var f = 0; f < F.K.length; f++) {
      e = e.replace(new RegExp(F.K[f][0], "g"), F.K[f][1]);
    }
    return e;
  }
  function H(e) {
    for (var f = 0; f < H.K.length; f++) {
      e = e.replace(new RegExp(H.K[f][1], "g"), H.K[f][0]);
    }
    return e;
  }
  function K(e) {
    var f = (window.innerHeight - u.Ja(e)) / 2.7 + document.body.scrollTop, v = (window.innerWidth - u.la(e)) / 2 + document.body.scrollLeft;
    50 > f && (f = 50);
    10 > v && (v = 10);
    e.style.top = f + "px";
    e.style.left = v + "px";
    e.classList.remove("nodisplay");
  }
  function M() {
    u.g("bodymask").classList.remove("nodisplay");
    setTimeout(function() {
      u.g("bodymask").classList.add("nodisplay");
    }, 100);
  }
  function O() {
    L.callMenuFunc(N);
  }
  function P(e) {
    if (e = void 0 === e ? null : e) {
      e.style.top = ya + 35 + "px";
    }
    var f = u.g("wrapper");
    f.style.height = "auto";
    var v = f.offsetHeight, B = window.innerHeight - Xa;
    v < B && (v = B);
    e && (e = e.offsetTop - ya + e.offsetHeight + 30, v < e && (v = e));
    f.style.height = v + "px";
  }
  function y(e) {
    e = void 0 === e ? null : e;
    var f = document.body.offsetWidth;
    e && (e.style.left = (f - e.offsetWidth) / 2 + "px");
    Fa !== f && (Fa = f, l(f));
  }
  var C = xx.vars, u = xx.q, G, L;
  xx.imports.push(function() {
    G = xx.meta;
    L = xx.menuFunctions;
  });
  C.hcode = {};
  t.extend({Wa:function(e) {
    u.extend(C.hcode, e);
  }, na:w, ma:d, Oa:function() {
    return 0 < Z ? !0 : !1;
  }, ab:function(e, f) {
    var v = C.hcode[e];
    return void 0 === f ? v : m(v, f);
  }, M:function(e, f) {
    var v = document.getElementById(e).innerHTML;
    return void 0 === f ? v : m(v, f);
  }, qb:m, bb:function(e, f) {
    if ("" === e) {
      f.w = 0, f.Ka = 0;
    } else {
      var v = new Image();
      v.onload = function() {
        f.w = this.width;
        f.Ka = this.height;
      };
      v.src = e;
    }
  }, J:r, mb:F, La:H, $a:k, wb:function(e) {
    return /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e);
  }, nb:function(e) {
    return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e);
  }, ob:function(e) {
    return Ya.test(e) ? !0 : !1;
  }, xb:function(e) {
    void 0 === e && (e = !0);
    e ? (u.g("col3").classList.add("nodisplay"), u.g("col2").style.width = "99%") : (u.g("col3").classList.remove("nodisplay"), u.g("col2").style.width = "");
  }, ja:function(e, f) {
    if (13 == e.which) {
      e.stopPropagation();
      e.preventDefault();
      var v = f.querySelectorAll("input.input_key,input.textinput");
      if (e.target === v[v.length - 1]) {
        return !0;
      }
      for (var B = 0; B < v.length; B++) {
        if (e.target === v[B]) {
          v[B + 1].focus();
          break;
        }
      }
    }
    return !1;
  }, kb:function(e) {
    var f;
    "string" === typeof e ? f = e : f = e.vb();
    e = f.lastIndexOf("/") + 1;
    0 >= e && (e = f.lastIndexOf("\\") + 1);
    f = f.slice(e);
    return f.slice(f.lastIndexOf(".") + 1);
  }, L:function(e, f, v, B, D) {
    D = void 0 === D ? "Please wait..." : D;
    e = "lib/php/" + e;
    var I = "?";
    f && (e = e + "?todo=" + f, I = "&");
    v && (e = e + I + u.Ta(v));
    var aa = {url:e, loadmsg:D};
    w(aa);
    return new Promise(function(V, qb) {
      fetch(e, {method:"POST", headers:{Accept:"application/json, text/plain, */*", "Content-Type":"application/json",}, body:JSON.stringify(B),}).then(function(X) {
        return X.json();
      }).then(function(X) {
        V(X);
      })["catch"](function(X) {
        console.log(X);
        qb(X);
      })["finally"](function() {
        d(aa);
      });
    });
  }, Ea:n, m:function(e, f) {
    var v = e % 256;
    e = Math.floor(e / 256);
    var B = e % 256, D = Math.floor(e / 256);
    return f ? "rgba(" + v + "," + B + "," + D + "," + f + ")" : "rgb(" + v + "," + B + "," + D + ")";
  }, random:function(e, f) {
    return Math.round(Math.random() * (f - e) + e);
  }, trim:function(e) {
    e = e.toString();
    for (var f = 0, v = e.length - 1; f <= v && 33 > e.charCodeAt(f);) {
      ++f;
    }
    for (; v > f && 33 > e.charCodeAt(v);) {
      --v;
    }
    return e.substr(f, v - f + 1);
  }, callMenuFunc:O, gb:function() {
    return N;
  }, sb:function(e, f) {
    N.da = e;
    N.X = f;
  }, Pa:function() {
    function e(I, aa, V) {
      I = I.replace(/[ -\/_!@#$%^&*()=+\\]/g, "");
      return void 0 === V ? "mnu" + aa + "_" + I : "mnu" + aa + "_" + V + I;
    }
    var f = '<ul id="theMenu" class="links">', v = 0;
    N.ga = [];
    N.fa = [];
    for (var B = 0; B < G.j.length; B++) {
      if (G.j[B].name) {
        G.j[B].C ? N.ga.push(G.j[B].C) : N.ga.push(e(G.j[B].name, B));
        f = G.j[B].lb ? f + ('<li class="menu nodisplay" data-v="' + B + '"') : f + ('<li class="menu" data-v="' + B + '"');
        G.j[B].id && (f += ' id="' + G.j[B].id + '"');
        f += ">" + G.j[B].name;
        if (G.j[B].O) {
          f += ' \u25bc<ul class="ul_' + B + ' nodisplay">';
          for (var D = 0; D < G.j[B].O.length; D++) {
            G.j[B].O[D].C ? N.fa.push(G.j[B].O[D].C) : N.fa.push(e(G.j[B].O[D].name, B, D)), f += '<li class="submenu" data-v="' + v + '">' + G.j[B].O[D].name + "</li>", v++;
          }
          f += "</ul>";
        }
        f += "</li>";
      }
    }
    f += "</ul>";
    u.g("mainmenu_placeholder").outerHTML = f;
  }, pb:function(e) {
    r({msg:"<b>Sorry but a fatal error has occurred.</b>|" + e, putleft:!0, bc:"#f88", boxType:2, tmo:!1,});
  }, ia:K, B:function(e) {
    e = u.g(e);
    e.classList.remove("nodisplay");
    P(e);
    y(e);
    u.g("dialogmask").classList.remove("nodisplay");
  }, o:function(e) {
    u.g(e).classList.add("nodisplay");
    u.g("dialogmask").classList.add("nodisplay");
    P();
    y();
  }, R:P, S:y, Va:function(e) {
    ya = e.th;
    Xa = e.tbh;
    l = e.putTopdiv;
  },});
  xx.constants = {MAX_FILE_SIZE:2000000,};
  var Z = 0, W = null, U = null, Wa = !0, Fa;
  window.onload = function() {
  };
  var Ya = RegExp("^((http|https):\\/\\/)?(([a-zA-Z0-9$\\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\\/(([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\\/([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\\?([a-zA-Z0-9$\\-_.+!*'(),;:@&=/?]|%[0-9a-fA-F]{2})*)?(\\#([a-zA-Z0-9$\\-_.+!*'(),;:@&=/?]|%[0-9a-fA-F]{2})*)?)?$");
  n.prototype = {moveBall:function(e) {
    var f = e.offsetX - 7;
    e.target === this.sl_ball && (f += e.target.offsetLeft);
    0 > f ? f = 0 : f > this.sl_maxRight && (f = this.sl_maxRight);
    this.sl_ball.style.left = f + "px";
    this.sl_r = f / this.sl_maxRight;
  }, initBall:function() {
    this.sl_ball.style.left = this.sl_r * this.sl_maxRight + "px";
  },};
  (function(e, f, v) {
    var B = new n(e, f, v);
    B.initBall();
    "cont" === e ? u.g("cont").addEventListener("click", function(D) {
      B.moveBall(D);
    }) : u.g(e).addEventListener("click", function(D) {
      B.moveBall(D);
    });
    return B;
  })("cont", "ball", 0.2);
  u.h("msgbox", "click", "button", function(e) {
    z(e, this);
  });
  u.h("msgbox", "keypress", "button", function(e) {
    13 == e.which && z(e, this);
  });
  F.K = [["&", "&amp;"], ["<", "&lt;"], [">", "&gt;"], ['"', "&quot;"], ["'", "&#039;"],];
  H.K = [["'", "&#039;"], ['"', "&quot;"], [">", "&gt;"], ["<", "&lt;"], ["&", "&amp;"],];
  var N = {menuActive:-1, submenuActive:-1,};
  u.h("topmenucontainer", "click", "#theMenu li", function(e) {
    e.stopPropagation();
    M();
    this.classList.contains("menu") ? (N.da = Number(this.getAttribute("data-v")), N.X = -1) : (N.da = Number(this.parentNode.parentNode.getAttribute("data-v")), N.X = Number(this.getAttribute("data-v")));
    O();
  });
  window.addEventListener("resize", function() {
    if (u.g("dialogmask").classList.contains("nodisplay")) {
      var e = u.g("wrappermask");
      if (e.classList.contains("nodisplay")) {
        P(), y();
      } else {
        e.style.width = "0px";
        e.style.height = "0px";
        P();
        y();
        var f = u.g("wrapper");
        e.style.width = f.offsetWidth + "px";
        e.style.height = f.offsetHeight + "px";
      }
    } else {
      for (e = "startupbox myExplorer unlockbox creatorloginbox getqnakeybox catlist_container getnumqs gettimeallowed getaudiovolume".split(" "), f = 0; f < e.length; f++) {
        var v = u.g(e[f]);
        if (!v.classList.contains("nodisplay")) {
          P(v);
          y(v);
          break;
        }
      }
    }
    k("msgbox", "msgboxmask");
    k("loading", "loadingmask");
    e = u.g("endbox");
    e.classList.contains("nodisplay") || K(e);
  });
  var ya, Xa;
});
xx.module("edu", function(t) {
  function l() {
    return new Promise(function(a) {
      Promise.all([rb.Ia(), w()]).then(function() {
        a();
      });
      d();
      x.Va({th:Za, bh:$a, tbh:Ib, putTopdiv:k});
      m();
      Jb = Math.round((Math.round(g.g("opt_num7").offsetHeight) - 12) / 2);
      var c = g.g("opt_get_height");
      c.classList.remove("opt_class");
      c.classList.add("nodisplay");
      n();
      z();
    });
  }
  function w() {
    return new Promise(function(a) {
      if ("undefined" === typeof localStorage) {
        x.L("ft_temp.php", "setCompID", null, {}).then(function(b) {
          "success" === b.value ? xx.vars.compid = b.Ya : void 0 != b.errmsg ? Q.debugon && alert(b.errmsg) : Q.debugon && alert("There was a problem with Ajax call");
          a();
        })["catch"](function(b) {
          alert("error in fixCompid, no local storage = " + b);
        });
      } else {
        var c = localStorage.getItem("compID");
        c ? c = parseInt(c, 10) : (c = x.random(68000000, 675999000), localStorage.setItem("compID", c));
        xx.vars.compid = c;
        x.L("ft_temp.php", "setSessionCompID", null, {compID:xx.vars.compid}).then(function(b) {
          "success" !== b.value && (void 0 != b.errmsg ? Q.debugon && alert(b.errmsg) : Q.debugon && alert("There was a problem with Ajax call"));
          a();
        })["catch"](function(b) {
          alert("error in fixCompid, localstorage = " + b);
        });
      }
    });
  }
  function d() {
    var a = g.g("siteName"), c = g.g("pageName");
    a.textContent = sb.ra.Ua;
    c.textContent = sb.ra.Sa;
    a = g.g("bodymask");
    a.style.width = screen.width + "px";
    a.style.height = screen.height + "px";
    a = g.g("topdiv");
    Kb = a.querySelector("#siteName").offsetWidth;
    oa = a.querySelector("#pageName").offsetWidth;
    130 > oa && (oa = 130);
    ab = g.la(g.g("scorecontainer"));
    a = a.querySelector("#theMenu");
    Ga = a.offsetWidth;
    c = g.g("topmenumask");
    c.style.width = Ga + "px";
    c.style.height = a.offsetHeight + "px";
    c = g.g("toprightmenumask");
    c.style.width = Ga - a.firstChild.offsetWidth + "px";
    c.style.height = a.offsetHeight + "px";
    a = g.g("gobutton");
    tb = a.offsetWidth;
    c = g.g("gamecontainermask");
    c.style.width = tb + "px";
    c.style.height = a.offsetHeight + "px";
    Za = g.g("topdiv").offsetHeight;
    $a = g.g("bottomdiv").offsetHeight;
    Ib = Za + $a;
    g.g("wrappermask").style.top = Za + "px";
    g.g("wrappermask").style.bottom = $a + "px";
  }
  function m() {
    function a(c, b, h) {
      var p = new x.Ea(c, b, h);
      p.initBall();
      "cont" === c ? g.g("cont").addEventListener("click", function(A) {
        p.moveBall(A);
        I();
      }) : g.g(c).addEventListener("click", function(A) {
        p.moveBall(A);
      });
      return p;
    }
    bb = a("cont", "ball", 0.2);
    cb = a("cont_v1", "ball_v1", za.r1);
    db = a("cont_v2", "ball_v2", za.r2);
    eb = a("cont_v3", "ball_v3", za.qa);
  }
  function n() {
    var a = g.g("wrapper");
    a.style.backgroundImage = "none";
    a.innerHTML = x.M("tem_info");
    x.R();
    x.S();
  }
  function k(a) {
    var c = Math.round(0.05 * a);
    g.u("#topdiv #siteName").style.left = c - 2 + "px";
    c += Kb;
    g.u("#topdiv p#pageName").style.left = c + "px";
    c += oa;
    var b = 0.92 * (a - Ga - tb), h = (c + b - ab) / 2 - 4;
    h > b - ab - 5 ? (h = b - ab - 5, g.g("pageName").style.width = h - (c - oa) - 10 + "px") : g.g("pageName").style.width = "auto";
    g.g("scorecontainer").style.left = h + "px";
    g.g("topmenucontainer").style.left = b + "px";
    g.g("gamecontainer").style.left = b + Ga + 0.025 * a + "px";
  }
  function r() {
    g.g("topmenumask").classList.remove("nodisplay");
  }
  function z() {
    g.g("topmenumask").classList.add("nodisplay");
  }
  function F(a) {
    var c = a.key;
    c = c.replace(/[- _./\|,:\\]/g, "");
    if (12 != c.length) {
      return !1;
    }
    a = a.Xa;
    a = a.replace(/-/g, "");
    a = H(a);
    return a != c ? !1 : !0;
  }
  function H(a) {
    var c = parseInt(a.substr(0, 6), 10);
    if (100000 > c) {
      return null;
    }
    a = a.substr(a.length - 2);
    for (var b, h = 1; 0 <= h; h--) {
      c *= 26;
      b = a.charCodeAt(h) - 65;
      if (0 > b || 25 < b) {
        return null;
      }
      c += b;
    }
    a = ub[1];
    b = ub[2];
    for (c = a > b ? Math.trunc(c / a) * b : Math.trunc(c / b) * a; 99999999 < c;) {
      c = Math.trunc(c / 7);
    }
    h = [];
    h[1] = String(c);
    for (c = a * b; 9999 < c;) {
      c = Math.trunc(c / 6);
    }
    h[2] = String(c);
    return K(h);
  }
  function K(a) {
    var c = "", b = [], h, p;
    b[1] = a[1].length;
    b[2] = a[2].length;
    if (b[1] > b[2]) {
      var A = 1;
      var E = 2;
    } else {
      E = 1, A = 2;
    }
    var S = Math.trunc(b[A] / b[E]);
    for (p = h = 0; p < b[E]; p++) {
      c = c + a[A].substr(h, S) + a[E].substr(p, 1), h += S;
    }
    return c + a[A].substr(h);
  }
  function M() {
    return new Promise(function(a) {
      fa = window.location.origin + "/" + ha.substr(0, ha.lastIndexOf(".")) + "_files/";
      var c = null;
      "undefined" !== typeof localStorage && (c = localStorage.getItem(ha));
      x.L("ft_temp.php", "openfile", null, {fpath:ha, stored:c}, "Reading the file, please wait").then(function(b) {
        "success" === b.value ? (Lb = b.subject, Ha = b.settings, ta = b.numCats, ba = b.catArr, Mb = b.totalQs, Aa = b.isRestricted, Y = b.dcontact, ub = b.codeBytes, vb = b.nFreeAccessQs, Nb = b.data, Ob = b.ptrArr, fb = b.cdArr, Pb = b.ansCoder, Qb = b.textColor, wb = b.fontName, Rb = b.fontSize, xb[1] = 0 !== b.fontBold[1], xb[2] = 0 !== b.fontBold[2], yb[1] = 0 !== b.fontUnderline[1], yb[2] = 0 !== b.fontUnderline[2], zb[1] = 0 !== b.fontItalic[1], zb[2] = 0 !== b.fontItalic[2], Ab = b.FrameBorderWidth, 
        Sb = b.FrameBackColor, Tb = b.FrameBorderColor, ia = b.backgroundPicture, "" != ia && (ia = ia.substr(1)), gb = b.backgroundStyle, Ba = b.backgroundColor, Ia = b.backgroundSound, "" != Ia ? (Ia = fa + Ia.substr(1), g.g("back_sound").setAttribute("src", Ia), Ja = !0) : Ja = !1, Ka = b.backQTimeSound, "" != Ka ? (Ka = fa + Ka.substr(1), g.g("backQTime_sound").setAttribute("src", Ka), hb = !0) : hb = !1, Ub = b.keyForecolor, Vb = b.keyBackcolor, Wb = b.keyBordercolor, Xb = b.fenceTLcolor, Yb = 
        b.fenceBRcolor, Zb = b.tickColor, La = b.pwString, b = g.g("pageName"), b.innerHTML = Lb, oa = b.offsetWidth, 130 > oa && (oa = 130), k(getComputedStyle(document.body, null).width.replace("px", "")), document.getElementById("fn_output").value = ha.substring(ha.lastIndexOf("/") + 1), a("good")) : a("bad");
      })["catch"](function(b) {
        a("bad");
        alert("error = " + b);
      });
    });
  }
  function O(a) {
    if (isNaN(a) || 0 >= a || 0 <= a.indexOf("e")) {
      return !0;
    }
  }
  function P() {
    return new Promise(function(a) {
      if ("" === ia) {
        a();
      } else {
        var c = new Image();
        c.onload = function() {
          a();
          Z();
        };
        c.onerror = function() {
          a();
        };
        c.src = fa + ia;
      }
      ib = jb = pa = 0;
      c = ".q_cell_text{" + Fa(1) + Ya(1) + "}";
      var b = x.m(Xb) + " ", h = x.m(Yb) + " ";
      c = c + (".opt_class2:hover, .on_div{background-color:rgba(120,120,120,0.2);border-color:" + b + h + h + b + "}") + (".o_cell_text{" + Fa(2) + Ya(2) + "}");
      c += ".n_format2{color:" + x.m(Ub) + "; background-color:" + x.m(Vb) + "; border-color:" + x.m(Wb) + "}";
      g.u("style").innerHTML = c;
      g.g("wrapper").style.backgroundColor = x.m(Ba);
    });
  }
  function y() {
    R = 0;
    0 !== ua && (-1 === ua ? (g.g("wrapper").style.backgroundImage = "none", ja = "") : 2 === ua ? (g.g("wrapper").style.backgroundImage = " url(" + kb + ")", ja = ka) : 3 === ua ? (g.g("wrapper").style.backgroundImage = " url(" + kb + ")", C(Ca), ja = ka) : 4 === ua ? Z() : 1 === ua && C(Ca));
    X();
    document.getElementById("wrapper").innerHTML = $b;
    va = pa % 2;
    lb = ac;
    u(Ma);
    x.R();
    x.S();
    pa++;
  }
  function C(a) {
    ca = a;
    0 === ca ? g.g("wrapper").style.backgroundSize = "100% 100%" : 1 === ca ? g.g("wrapper").style.backgroundSize = "cover" : 2 === ca ? g.g("wrapper").style.backgroundSize = "contain" : 3 === ca && (g.g("wrapper").style.backgroundSize = "auto");
  }
  function u(a) {
    "undefined" === typeof a && (a = "30");
    3599 < a && (a = 3599);
    0 === a && (a = 1);
    var c = {};
    c.N = Math.floor(a / 60);
    c.A = a % 60;
    c.sa = !1;
    L(c);
    mb = setInterval(function() {
      c.A--;
      L(c);
      c.sa && (clearInterval(mb), 0 === R && (g.ea("#wrapper .opt_class", "opt_class2"), G("wrong", "Time up")));
    }, 1000);
  }
  function G(a, c) {
    c = void 0 === c ? "Wrong" : c;
    R = -1;
    g.g("wrappermask").classList.remove("nodisplay");
    var b = document.createElement("div");
    b.setAttribute("style", "font-size:1.3em;z-index:400;color:" + x.m(Zb) + ";position:absolute;top: " + Jb + "px;left:36px;");
    b.textContent = "\u2714";
    g.u("div#opt_num" + lb).insertAdjacentElement("afterend", b);
    "correct" === a ? (Na && bc.play(), ya("Correct, well done!", 700, "good"), ib++) : (Na && cc.play(), ya(c + ", number " + lb + " is correct", 1000, "h"));
    g.g("thescore").innerHTML = ib + "/" + pa;
    pa >= wa ? (g.g("thescore").style.backgroundColor = "red", setTimeout(function() {
      var h = g.g("endbox");
      h.querySelector("p#endmsg").innerHTML = "Game over...<br>You scored " + ib + "/" + pa + "<br>";
      x.ia(h);
    }, 1000)) : R = 1;
    qb(qa);
    X();
  }
  function L(a) {
    if (0 === a.N) {
      0 >= a.A && (a.sa = !0);
      var c = a.A;
    } else {
      0 > a.A && (a.A = 59, a.N--), 0 === a.N ? c = a.A : c = 10 > a.A ? a.N + ":0" + a.A : a.N + ":" + a.A;
    }
    document.getElementById("clock").value = c;
  }
  function Z() {
    ja = ia;
    ca = gb;
    g.g("wrapper").style.backgroundImage = "url(" + fa + ja + ")";
    C(ca);
  }
  function W() {
    return new Promise(function(a) {
      var c = 0, b, h = setInterval(function() {
        0 === c && (c = 1, b = U());
        b.then(function(p) {
          clearInterval(h);
          a(p);
        })["catch"](function() {
          c = 0;
        });
      }, 50);
    });
  }
  function U() {
    return new Promise(function(a, c) {
      var b = Oa - jb;
      0 === b && a("end");
      var h = jb % 2;
      jb++;
      var p = x.random(1, b), A = {}, E = {}, S = Pa[p];
      Pa[p] = Pa[b];
      e(S, A, E).then(function() {
        var da = A.T, T = A.Da;
        ua = Wa();
        var J = Ha.Q_W[T], Bb = Ha.Q_H[T], la = N(J, Bb, E, T, 0), Cb = "" === A.H[6] ? "nodisplay_important" : "", Qa = "";
        "" === E.clipPath[0] ? Da[h][0] = !1 : (Da[h][0] = !0, ra[h][0].src = fa + E.clipPath[0].substr(1), Qa = '<img src="res/soundnew.gif">');
        la = {si:Qa, offstyle:Cb, q:A.H[6], n:0, p0:la};
        var Db = x.M("tem_q", la), ic = A.I;
        Db += '<div class="opts" >';
        J = Ha.A_W[T];
        Bb = Ha.A_H[T];
        for (var xa = 1; xa <= da; xa++) {
          var Ra = ic[xa];
          la = N(J, Bb, E, T, Ra);
          Cb = "" === A.H[Ra] ? "nodisplay_important" : "";
          "" === E.clipPath[Ra] ? (Da[h][xa] = !1, Qa = "") : (Da[h][xa] = !0, ra[h][xa].src = fa + E.clipPath[Ra].substr(1), Qa = '<img src="res/soundnew.gif">');
          la = {si:Qa, offstyle:Cb, opt:A.H[Ra], n:xa, pn:la};
          la = x.M("tem_opt", la);
          Db += la;
        }
        $b = Db + "</div>";
        ac = A.aa;
        a("ok");
      })["catch"](function() {
        c("bad picture");
      });
    });
  }
  function Wa() {
    if ("" === ka) {
      if ("" === ia) {
        return "" === ja ? 0 : -1;
      }
      if ("" === ja) {
        return 4;
      }
      if (ja === ia) {
        if (gb === ca) {
          return 0;
        }
        Ca = gb;
        return 1;
      }
      return 4;
    }
    return ka === ja ? Ca === ca ? 0 : 1 : Ca === ca ? 2 : 3;
  }
  function Fa(a) {
    return "color:" + x.m(Qb[a]) + "; font:" + (xb[a] ? "bold " : "") + (yb[a] ? "underline " : "") + (zb[a] ? "italic " : "") + (Rb[a] + "pt ") + ("" === wb[a] ? "sans-serif" : wb[a] + ",sans-serif") + ";";
  }
  function Ya(a) {
    return 0 > Ab[a] ? "" : "padding:12px 20px;background-color:" + x.m(Sb[a]) + "; border:" + (Ab[a] + "px solid " + x.m(Tb[a]) + ";");
  }
  function N(a, c, b, h, p) {
    var A = "";
    if ("" != b.G[p]) {
      h = b.width[p];
      var E = b.height[p];
      if (0 < h && 0 < E) {
        0 >= a && (a = h);
        0 >= c && (c = E);
        if (a < h || c < E) {
          A = h / E, a < h && c < E ? a / c > A ? (E = c, h = Math.round(E * A)) : (h = a, E = Math.round(h / A)) : a < h ? (h = a, E = Math.round(h / A)) : (E = c, h = Math.round(E * A));
        }
        a = "";
        c = b.W[p];
        0 < c && (a = "border:solid " + c + "px " + x.m(b.pa[p]) + ";");
        A = '<div class="qo_cell_picture"><img src="' + b.U[p] + '" \n          width="' + h + '" height="' + E + '" alt="" style="vertical-align:middle;' + a + '">\n          </div>';
      }
    }
    return A;
  }
  function ya(a, c, b) {
    void 0 === c && (c = 1000);
    void 0 === b ? b = "#e55" : "good" === b ? b = "#dfd" : "w" === b ? b = "#fe8" : "b" === b ? b = "#faa" : "h" === b && (b = "#ccc");
    var h = g.g("flashbox");
    h.querySelector("p#flashmsg").innerHTML = a + "<br><br>";
    h.style.backgroundColor = b;
    x.ia(h);
    setTimeout(function() {
      h.classList.add("nodisplay");
    }, c);
  }
  function Xa(a, c) {
    var b = 0;
    if (Aa) {
      for (var h = 0; b < Mb && b < vb;) {
        h++;
        for (var p = 1; p <= ta && !(h <= ba[p].n && (a[++b] = ba[p].q[h]), b >= vb); p++) {
        }
      }
    } else {
      for (h = 1; h <= ta; h++) {
        if (ba[h].selected) {
          for (p = 1; p <= ba[h].n; p++) {
            a[++b] = ba[h].q[p];
          }
        }
      }
    }
    c.n = b;
    return !0;
  }
  function e(a, c, b) {
    return new Promise(function(h, p) {
      v(a, c, b);
      b.U = [];
      var A = !0, E = c.T + 2;
      ka = b.G[7];
      "" != ka ? (Ca = b.W[7], ka = ka.substr(1), kb = fa + ka, b.U[7] = kb, f(b, 7).then(function() {
        0 === --E && (A ? h() : p());
      })) : 0 === --E && (A ? h() : p());
      for (var S = 0; S <= c.T; S++) {
        "" != b.G[S] ? (b.U[S] = fa + b.G[S].substr(1), f(b, S).then(function(da) {
          "Bad image" === da && p();
          0 === --E && (A ? h() : p());
        })["catch"](function() {
          p();
          A = !1;
        })) : 0 === --E && (A ? h() : p());
      }
    });
  }
  function f(a, c) {
    return new Promise(function(b) {
      var h = new Image();
      h.onload = function() {
        a.width[c] = this.width;
        a.height[c] = this.height;
        b();
      };
      h.onerror = function() {
        b("Bad image");
      };
      h.src = a.U[c];
    });
  }
  function v(a, c, b) {
    var h = [];
    a = Ob[a];
    var p = a.off;
    a = a.len;
    for (var A = 1; A <= a; A++) {
      h[A] = Nb[p + A];
    }
    p = h[a];
    A = fb.low;
    for (var E = fb.high, S = fb.sum1, da, T = 1; T < a; T++) {
      p = da = p > h[T] ? h[T] + 256 - p : h[T] - p, da > A && da < E && (da = S - da), h[T] = da;
    }
    a = [];
    p = {p:3};
    b.G = [];
    b.clipPath = [];
    b.W = [];
    b.pa = [];
    b.width = [];
    b.height = [];
    c.H = [];
    b.G[0] = D(h, p, !0);
    B(h, p, 0, b);
    b.clipPath[0] = D(h, p, !0);
    c.H[6] = D(h, p, !0);
    for (A = 1; A <= h[1]; A++) {
      b.G[A] = D(h, p, !0), B(h, p, A, b), b.clipPath[A] = D(h, p, !0), c.H[A] = D(h, p, !1), a[A] = 1 === h[p.p] ? !0 : !1, p.p += 1;
    }
    b.G[6] = D(h, p, !0);
    B(h, p, 6, b);
    b.clipPath[6] = D(h, p, !0);
    c.H[7] = D(h, p, !0);
    b.G[7] = D(h, p, !0);
    B(h, p, 7, b);
    b.clipPath[7] = D(h, p, !0);
    b = c.H[6];
    var J;
    "" === b ? J = " " : J = b;
    c.aa = Math.round(h[p.p] / (J.charCodeAt(0) % Pb + 1));
    c.T = h[1];
    c.Da = h[2];
    c.I = [];
    J = 0;
    b = [];
    h = c.T;
    for (p = 1; p <= h; p++) {
      a[p] ? c.I[p] = p : (c.I[p] = 0, J++, b[J] = p);
    }
    if (0 !== J) {
      for (a = 1; 1 < J;) {
        for (; 0 !== c.I[a];) {
          a++;
        }
        p = x.random(1, J);
        c.I[a] = b[p];
        b[p] = b[J];
        J--;
      }
      for (; 0 !== c.I[a];) {
        a++;
      }
      c.I[a] = b[1];
      for (J = 1; J <= h; J++) {
        if (c.I[J] === c.aa) {
          c.aa = J;
          break;
        }
      }
    }
  }
  function B(a, c, b, h) {
    h.W[b] = a[c.p];
    7 != b && (h.pa[b] = 0 < h.W[b] ? a[c.p + 1] + 256 * a[c.p + 2] + 65536 * a[c.p + 3] : 0);
    c.p += 4;
  }
  function D(a, c, b) {
    var h = a[c.p];
    b && (c.p += 1, h += 256 * a[c.p]);
    b = "";
    for (var p = 1; p <= h; p++) {
      b += String.fromCharCode(a[c.p + p]);
    }
    c.p = c.p + h + 1;
    return b;
  }
  function I() {
    var a = bb.sl_r * cb.sl_r;
    bc.volume = a;
    cc.volume = a;
    a = bb.sl_r * db.sl_r;
    sa.volume = a;
    Ea.volume = a;
    nb.volume = a;
    a = bb.sl_r * eb.sl_r;
    Array.from(g.v("#clips0 audio")).forEach(function(c) {
      c.volume = a;
    });
    Array.from(g.v("#clips1 audio")).forEach(function(c) {
      c.volume = a;
    });
  }
  function aa(a, c) {
    a.stopPropagation();
    a.preventDefault();
    var b = parseInt(c.id.charAt(c.id.length - 1), 10);
    Da[va][b] && (ra[va][b].pause(), ob = -1);
  }
  function V(a, c) {
    a.stopPropagation();
    a.preventDefault();
    var b = parseInt(c.id.charAt(c.id.length - 1), 10);
    Da[va][b] && (ra[va][b].currentTime = 0, ra[va][b].play(), ob = b);
  }
  function qb(a) {
    1 > a || (1 === a ? sa.pause() : 2 === a ? Ea.pause() : nb.pause());
  }
  function X() {
    Na && (0 === R ? hb && (1 === qa && sa.pause(), Ea.play(), qa = 2) : Ja ? (sa.play(), qa = 1) : qa = 0);
  }
  var Q = xx.vars, g = xx.q, x, sb, rb;
  xx.imports.push(function() {
    x = xx.common;
    sb = xx.meta;
    rb = xx.myExpl;
  });
  t.extend({Ga:function(a, c) {
    c = void 0 === c ? "" : c;
    x.o("myExplorer");
    "Cancel" !== a && "" !== c && c !== ha && (g.g("toprightmenumask").classList.add("nodisplay"), g.g("gamecontainermask").classList.add("nodisplay"), ha = c, M(a).then(function(b) {
      if ("bad" === b) {
        x.J({msg:"Problem with opening the file", bc:"w"});
      } else if ("cancel" !== b && "good" === b && (0 > Ba && (Ba = 300000), g.g("wrapper").style.backgroundColor = x.m(Ba, 0.6), Eb = 0, Aa)) {
        b = "<b>Name: " + Y[1] + "</b><br>";
        b += "<b>Contact: " + Y[2];
        "" != Y[3] && (b += ", " + Y[3]);
        "" != Y[4] && (b += ", " + Y[4]);
        "" != Y[5] && (b += ", " + Y[5]);
        "" != Y[6] && (b += ", " + Y[6]);
        b += "</b>";
        g.g("contactdetails").innerHTML = b;
        var h = Q.compid;
        b = String.fromCharCode(65 + h % 26);
        h = Math.trunc(h / 26);
        b += String.fromCharCode(65 + h % 26);
        h = Math.trunc(h / 26);
        b = h + "-" + b;
        g.g("gcode_input1").value = b;
        g.g("gcode_input2").value = g.g("fn_output").value;
        g.g("gcode_input3").value = "";
        x.B("unlockbox");
        g.g("gcode_input3").focus();
      }
    }));
  }, Ca:function() {
    x.B("myExplorer");
  }, wa:function() {
    var a = ["#eee", "#fff"];
    for (var c = '<div id="catlistDialog" style="background-color: ' + a[(ta + 1) % 2] + ' ">\n    <div style="background-color:#666; color:white;">\n    <div class="cat_name">Category</div>\n    <div class="numQs">Qs</div>\n    <div class="selected_cb" style="padding-left:0;">Selected</div></div>', b = 1; b <= ta; b++) {
      c += '<div style="background-color:' + a[b % 2] + '">\n     <div class="cat_name" >' + b + ") " + ba[b].name + '</div>\n     <div  class="numQs">' + ba[b].n + '</div>\n     <div class="selected_cb"><input type="checkbox"' + (Aa ? 'disabled="true" ' : "") + (!0 === ba[b].selected ? "checked" : "") + "></div></div>";
    }
    c += "<br>";
    c = Aa ? c + '<div style="margin-right:3%">\n      <button class="butt_class1" style="padding:2px 10px;">OK</button>\n      </div>' : c + '<div style="margin-right:3%">\n      <button id="sa1" class="butt_class1">Select all</button>\n      <button id="sn1" class="butt_class1">Select none</button>\n      </div>\n      <div style="clear:right;margin-right:3%">\n      <button id="catlist_save" class="butt_class1" style="padding:2px 10px;" >Apply</button>\n      <button id="catlist_cancel" class="butt_class1" style="padding:2px 10px;">Cancel</button>\n      </div>';
    a = c + "</div>";
    document.getElementById("catlist_container").innerHTML = a;
    x.B("catlist_container");
    Sa = !1;
  }, Ba:function() {
    g.g("gnq1_input").value = "20";
    Ta = g.g("gnq2_input").value = Ua;
    x.B("getnumqs");
  }, Fa:function() {
    g.g("gta1_input").value = "30";
    Va = g.g("gta2_input").value = Ma;
    x.B("gettimeallowed");
  }, ta:function() {
    x.B("getaudiovolume");
  },});
  var dc = !1, Kb, oa, ab, Ga, tb, Za, $a, Ib, Jb, bb, cb, db, eb, bc = g.g("correct_clip"), cc = g.g("wrong_clip");
  window.onload = function() {
    xx.fixImports();
    x.Pa();
    rb.Ma(xx.edu, 1);
    l().then(function() {
      r();
      x.B("startupbox");
      g.u("body").removeChild(g.g("startupDiv"));
    });
  };
  g.h("wrapper", "click", ".info_class", function() {
    this.nextElementSibling.nextElementSibling.classList.toggle("nodisplay");
    x.R();
    x.S();
  });
  document.onkeydown = function(a) {
    if (!(0 < x.Oa())) {
      if (window.event) {
        var c = window.event.keyCode;
      } else {
        a && (c = a.which);
      }
      a = a || window.event;
      a.altKey && (83 === c ? (Q.isLocal ? Q.debugon = !Q.debugon : !0 === Q.debugon ? Q.debugon = !1 : dc && !1 === Q.debugon && (Q.debugon = !0), Q.debugon ? g.g("debug").style.display = "" : g.g("debug").style.display = "none") : 76 !== c || Q.debugon && "" === document.getElementById("fn_output").value || "" === document.getElementById("fn_output").value || !g.g("dialogmask").classList.contains("nodisplay") || "New game" !== ea || 5 < ++Eb || (g.g("clb1_input").value = g.g("fn_output").value, 
      g.g("clb2_input").value = "", x.B("creatorloginbox"), g.g("clb2_input").focus()));
    }
  };
  g.g("pageName").addEventListener("click", function() {
    dc = !0;
    setTimeout("canDebug = false", 5000);
  });
  g.h("startupbox", "click", "button", function() {
    "Accept" === this.innerHTML ? (x.o("startupbox"), z()) : location.replace("https://www.google.com");
  });
  g.h("unlockbox", "click", "button", function() {
    if ("Next" === this.textContent) {
      var a = g.v("#unlockbox input");
      F({cid:a[0].value, key:a[2].value}) ? (a = 0, "undefined" === typeof localStorage ? a = 1 : localStorage.setItem(ha, xx.vars.compid), x.L("ft_temp.php", "setFree", null, {doCookie:a}).then(function() {
        Aa = !1;
        x.J({msg:"Correct key", bc:"g", callback1:function() {
          x.o("unlockbox");
        },});
      })["catch"](function(c) {
        alert("error from setFree = " + c);
      })) : x.J({msg:"Wrong key", bc:"b"});
    } else {
      x.o("unlockbox");
    }
  });
  g.h(document.body, "keypress", "#unlockbox", function(a) {
    x.ja(a, this) && (a = document.createEvent("HTMLEvents"), a.initEvent("click", !0, !1), g.u("#unlockbox button").dispatchEvent(a));
  });
  var Eb;
  g.h("creatorloginbox", "click", "button", function() {
    if ("Next" === this.textContent) {
      var a = g.v("#creatorloginbox input");
      var c = a[0].value;
      a = a[1].value;
      if ("" === La || 0 === La.length) {
        a = !1;
      } else {
        c = c.toLowerCase();
        var b = [];
        var h = a.length;
        b[1] = 3 > h ? a + "XXX".substr(0, 3 - h) : a;
        a = c.lastIndexOf(".");
        b[2] = ".vna" === c.substr(a) ? c.substr(a) + "qna" : c;
        a = K(b);
        c = a.length;
        b = Math.trunc((100 - c) / 7);
        2 > b && (b = 2);
        b: {
          var p = La.substr(0, b);
          for (b = 0; b < c; b++) {
            var A = p.charCodeAt(b) - 97;
            if (0 >= A) {
              a = "";
              break b;
            }
            for (h = a.charCodeAt(b);;) {
              var E = h % A;
              p += String.fromCharCode(E + 100);
              h = Math.trunc(h / A);
              if (4 > E) {
                if (A = E + 5, 2 > E) {
                  if (25 < c) {
                    break;
                  }
                } else {
                  if (35 < c) {
                    break;
                  }
                }
              } else {
                A = E;
              }
              if (0 === h) {
                break;
              }
            }
          }
          a = p;
        }
        a = a != La ? !1 : !0;
      }
      a ? (x.o("creatorloginbox"), g.g("gqkb2_input").value = g.g("fn_output").value, g.g("gqkb1_input").value = "", g.g("gqkb3_input").value = "", x.B("getqnakeybox"), g.g("gqkb1_input").focus()) : (x.J({msg:"Wrong password"}), 5 < ++Eb && x.o("creatorloginbox"));
    } else {
      x.o("creatorloginbox");
    }
  });
  g.h(document.body, "keypress", "#creatorloginbox", function(a) {
    x.ja(a, this) && (a = document.createEvent("HTMLEvents"), a.initEvent("click", !0, !1), g.u("#creatorloginbox button").dispatchEvent(a));
  });
  g.u("#getqnakeybox button").addEventListener("click", function() {
    if ("Calculate key" === this.textContent) {
      g.u("#gqkb3_input").value = "";
      var a = g.v("#getqnakeybox input");
      var c = a[0].value;
      c = c.replace(/[- _./\|,:\\]/g, "");
      if (8 != c.length) {
        c = !1;
      } else {
        if (c = c.toUpperCase(), c = H(c), null == c) {
          c = !1;
        } else {
          var b = c.substr(0, 4) + "-" + c.substr(4, 4) + "-" + c.substr(8);
          c = !0;
        }
      }
      c ? a[2].value = b : x.J({msg:"Bad computer ID", bc:"b"});
    } else {
      x.o("getqnakeybox");
    }
  });
  var ha, fa, Lb, Ha, ta, ba, Mb, Aa, vb, Nb, Ob, ub, fb, Pb, Qb, wb, Rb, xb = [], yb = [], zb = [], Ab, Sb, Tb, ia, gb, Ba, Ia, Ka, Ub, Vb, Wb, Xb, Yb, Zb, La, Y, Sa;
  g.h("catlist_container", "click", "button", function() {
    var a = this.textContent;
    if ("Select all" === a || "Select none" === a) {
      a = "Select all" === a;
      for (var c = g.v("#catlist_container input"), b = 0; b < c.length; b++) {
        c[b].checked = a;
      }
      Sa = !0;
    } else {
      if (x.o("catlist_container"), "Apply" === a && Sa) {
        c = g.v("#catlist_container input");
        a = [];
        for (b = 0; b < c.length; b++) {
          a[b] = c[b].checked;
        }
        if (ta === a.length) {
          for (c = 0; c < ta; c++) {
            ba[c + 1].selected = a[c];
          }
          Sa = !1;
        } else {
          alert("There was a problem with the Category list");
        }
      }
    }
  });
  g.h("catlist_container", "change", "input", function() {
    Sa = !0;
  });
  var Ua = "20", Ta;
  g.h("getnumqs", "click", "button", function() {
    var a = this.textContent;
    "Reset" === a ? (Ta = Ua = "20", g.g("gnq2_input").value = Ua) : (x.o("getnumqs"), "Apply" === a && (Ua = Ta));
  });
  g.h(document.body, "keyup", "#gnq2_input", function(a) {
    a = a.target.value;
    O(a) ? g.g("gnq2_input").value = Ta : Ta = a;
  });
  var Ma = "30", Va;
  g.h("gettimeallowed", "click", "button", function() {
    var a = this.textContent;
    "Reset" == a ? (Va = Ma = "30", g.g("gta2_input").value = Ma) : (x.o("gettimeallowed"), "Apply" === a && (Ma = Va));
  });
  g.h(document.body, "keyup", "#gta2_input", function(a) {
    a = a.target.value;
    O(a) ? g.g("gta2_input").value = Va : Va = a;
  });
  var Pa, Oa, ea = "New game", R = -2, $b, lb, ac, mb, wa, pa, jb, ib, Fb, ua, ja, ca, ka, Ca, kb, qa = 0, sa = document.getElementById("back_sound"), Ea = document.getElementById("backQTime_sound"), nb = document.getElementById("backQ_sound"), Ja = !1, hb = !1, ob = -1, va;
  g.g("gobutton").addEventListener("click", function() {
    var a = this;
    if ("New game" === ea) {
      I();
      Pa = [];
      var c = {};
      Xa(Pa, c) ? (Oa = c.n, 0 === Oa ? x.J({msg:"There are no questions in the selection pool", bc:"w",}) : (r(), x.na({loadmsg:"Preparing the test, please wait"}), document.getElementById("tem_info").innerHTML = x.M("wrapper"), g.u("#wrapper .info").classList.add("nodisplay"), Promise.all([P(), W()]).then(function(b) {
        x.ma();
        "end" === b[1] ? (x.J({msg:"There are no valid questions in the selection pool", bc:"w",}), z()) : (b = g.g("thescore"), b.style.backgroundColor = "", b.innerHTML = "0/0", g.g("scorecontainer").classList.remove("nodisplay"), wa = Ua, wa > Oa && (wa = Oa), document.getElementById("score_input").value = wa, x.R(), x.S(), ea = "Start", a.textContent = ea, a.style.backgroundColor = "#0f0", sa.currentTime = 0, Ea.currentTime = 0, nb.currentTime = 0, X(), R = -1);
      }))) : alert("fault with fillTestQ");
    } else {
      "Start" === ea ? (ea = "End", a.textContent = ea, a.style.backgroundColor = "#f00", y(), pa < wa && (Fb = W())) : "End" === ea && (g.g("endbox").classList.add("nodisplay"), clearInterval(mb), g.g("scorecontainer").classList.add("nodisplay"), document.getElementById("clock").value = "", g.g("wrappermask").classList.add("nodisplay"), z(), n(), g.g("wrapper").style.backgroundColor = x.m(Ba, 0.6), ea = "New game", a.textContent = ea, a.style.backgroundColor = "#eee", 0 !== qa && (1 === qa ? sa.pause() : 
      2 === qa ? Ea.pause() : nb.pause()), R = -2);
    }
  });
  var Da = [[], []], ra = [];
  ra[0] = g.v("#clips0 audio");
  ra[1] = g.v("#clips1 audio");
  g.h("wrapper", "click", ".opt_class2", function(a) {
    0 == R && (this.classList.add("on_div"), clearInterval(mb), a.stopPropagation(), a.preventDefault(), parseInt(this.id.charAt(this.id.length - 1), 10) === lb ? G("correct") : G("wrong"));
  });
  g.g("wrappermask").addEventListener("click", function(a) {
    a.stopPropagation();
    a.preventDefault();
    1 == R && (g.g("flashbox").classList.add("nodisplay"), x.na({loadmsg:"Fetching the next question, please wait"}), Fb.then(function(c) {
      x.ma();
      "end" === c ? (x.J({msg:"Unable to complete the test - some questions had errors", bc:"w",}), R = -1, g.g("thescore").style.backgroundColor = "red") : (g.g("wrappermask").classList.add("nodisplay"), y(), pa < wa && (Fb = W()));
    }));
  });
  g.u("#endbox button").addEventListener("click", function() {
    g.ha("gobutton", "click");
  });
  var Na = !0, za = {r1:1, r2:0.7, qa:1,};
  g.h("getaudiovolume", "click", "button", function() {
    "Reset" == this.textContent ? (cb.sl_r = za.r1, cb.initBall(), db.sl_r = za.r2, db.initBall(), eb.sl_r = za.qa, eb.initBall()) : x.o("getaudiovolume");
  });
  g.h("wrapper", "mouseout", ".qq", function(a) {
    aa(a, this);
  });
  g.h("wrapper", "mouseout", ".opt_class2", function(a) {
    aa(a, this);
  });
  g.h("wrapper", "mouseover", ".qq", function(a) {
    V(a, this);
  });
  g.h("wrapper", "mouseover", ".opt_class2", function(a) {
    V(a, this);
  });
  window.addEventListener("blur", function() {
    Na = !1;
    g.g("bodymask").classList.remove("nodisplay");
    -2 !== R && (-1 === R || 1 === R ? Ja && sa.pause() : (hb ? Ea.pause() : Ja && sa.pause(), 0 <= ob && ra[va][ob].pause()));
  });
  window.addEventListener("focus", function() {
    Na = !0;
    g.g("bodymask").classList.add("nodisplay");
    -2 !== R && X();
  });
});
xx.module("meta", function(t) {
  t.extend({ra:{Ua:"TestU", Sa:"Home page"}, j:[{name:"Open File", C:"__openFile"}, {name:"Categories", C:"__categories"}, {name:"Settings", ub:[{name:"Number of questions", C:"__numberOfQuestions"}, {name:"Time allowed", C:"__timeAllowed"}, {name:"Audio volume", C:"__audioVolume"}]}]});
});
xx.module("menuFunctions", function(t) {
  var l;
  xx.imports.push(function() {
    l = xx.edu;
  });
  t.extend({callMenuFunc:function(w) {
    w = 0 <= w.X ? w.fa[w.X] : w.ga[w.da];
    w = this[w];
    "function" === typeof w && w();
  }, __openFile:function() {
    l.Ca();
  }, __categories:function() {
    l.wa();
  }, __numberOfQuestions:function() {
    l.Ba();
  }, __timeAllowed:function() {
    l.Fa();
  }, __audioVolume:function() {
    l.ta();
  }});
});
xx.module("myExpl", function(t) {
  function l(y) {
    this.data = y;
    this.selected = -1;
    this.l = [];
    this.i = "";
  }
  function w(y, C, u) {
    for (var G = '<div class="items level' + u + '">';;) {
      if (0 < y.ps[C] ? (G += '<div id="ai_' + C + '">\n          <span class="indx">' + k.M("tem_plusMinus") + '</span><span \n          class="holder"><span class="directory"></span><span \n          class="itemName">' + y.f[C] + '</span></span>\n          </div>\n          <div class="subcatlistdiv nodisplay">' + w(y, y.ps[C], u + 1) + "\n          </div>", 0 === u && (F = !1)) : G += '<div id="ai_' + C + '">\n            <span class="indx"></span><span class="holder"><span \n            class="directory"></span><span class="itemName">' + 
      y.f[C] + "</span>\n            </span>\n            </div>", C = y.pn[C], 0 === C) {
        return G + "</div>";
      }
    }
  }
  function d() {
    n.g("fn_input").value = "";
    H = -1;
    M = K = "";
  }
  var m = xx.vars, n = xx.q, k;
  xx.imports.push(function() {
    k = xx.common;
  });
  t.extend({Ma:function(y, C) {
    function u(G) {
      n.ea("#files_div li span", "chosen");
      var L = K;
      d();
      y.Ga(G, L);
    }
    P = C = void 0 === C ? P : C;
    n.h("files_div", "click", "li", function() {
      K = this.dataset.fp;
      n.g("fn_input").value = K.substring(K.lastIndexOf("/") + 1);
      K != M && (M = K, n.ea("#files_div li span", "chosen"), this.firstChild.classList.add("chosen"));
      O = !0;
    });
    n.h("files_div", "dblclick", "li", function() {
      !0 === O && u("Open");
    });
    n.h("myExplorer", "click", "button", function() {
      var G = this.textContent;
      "Reset" == G ? (d(), r.D(), z = n.g("folders_div").querySelector(".holder"), n.ha("itemPopup", "click")) : "Open" === G && "" === n.g("fn_input").value || u(G);
    });
  }, Ia:function() {
    return new Promise(function(y) {
      F = !0;
      r = new l({dir:m.docPath, notdirs:"_files"});
      r.Z().then(function() {
        y("is done after getFob()");
      });
    });
  },});
  var r, z, F, H = -1, K, M = "", O, P = 1;
  n.h("folders_div", "click", ".inbox", function() {
    var y = this.parentNode, C = y.getAttribute("data-closed");
    if ("true" === C) {
      C = y.parentNode.parentNode, y.querySelector("line.down").classList.add("nodisplay"), y.setAttribute("data-closed", !1), C.nextElementSibling.classList.remove("nodisplay"), C.querySelector(".holder>span").classList.add("folder_open");
    } else if ("false" === C) {
      C = y.parentNode.parentNode;
      var u = r.selected;
      0 <= u && r.$(u, Number(C.id.slice(3))) && (r.F(-1), n.g("files_div").innerHTML = "");
      y.querySelector("line.down").classList.remove("nodisplay");
      y.setAttribute("data-closed", !0);
      C.nextElementSibling.classList.add("nodisplay");
      C.querySelector(".holder>span").classList.remove("folder_open");
    }
  });
  n.h("folders_div", "mouseover", ".holder", function() {
    var y = document.querySelector("#itemPopup"), C = n.Ra(this, "myExplorer", y);
    y.style.left = C[1] + "px";
    y.style.top = C[0] + "px";
    y.innerHTML = k.La(this.innerHTML);
    y.classList.remove("nodisplay");
    z = this;
  });
  n.g("itemPopup").addEventListener("mouseout", function(y) {
    n.Na(this, y.relatedTarget) || (this.classList.add("nodisplay"), z = null);
  });
  n.h("folders_div", "mouseout", ".holder", function(y) {
    "itemPopup" != y.relatedTarget.parentNode.id && "itemPopup" != y.relatedTarget.id && n.g("itemPopup").classList.add("nodisplay");
  });
  n.g("itemPopup").addEventListener("click", function(y) {
    y.stopPropagation();
    y = Number(z.parentNode.id.slice(3));
    if (y !== H) {
      d();
      H = y;
      var C = this.querySelector("span.itemName");
      C && C.classList.add("chosen");
      r.F(y);
      var u = r.V(y);
      return new Promise(function(G) {
        k.L("ft_Explorer.php", "getFiles", null, {dir:u}).then(function(L) {
          if ("success" === L.value) {
            var Z = document.getElementById("files_div");
            L = L.files;
            for (var W = '<ul class="fileList" data-fp="' + u + '">', U = 0; U < L.length; U += 2) {
              W += '<li data-fp="' + u + L[U] + '"><span class="ext_' + L[U + 1] + '">\n        ' + L[U] + "</span></li>";
            }
            Z.innerHTML = W + "</ul>";
          } else {
            void 0 != L.errmsg ? alert(L.errmsg) : alert("There was a problem with Fetch call");
          }
          G();
        })["catch"](function() {
          console.log("an error occurred when fetching the files");
          alert("error when fetching files");
        });
      });
    }
  });
  l.prototype.Z = function() {
    var y = this;
    return new Promise(function(C) {
      k.L("ft_Explorer.php", "getFolders", null, y.data).then(function(u) {
        y.i = u;
        y.D();
        y.Y();
        z = n.g("folders_div").querySelector(".holder");
        n.ha("itemPopup", "click");
        C();
      });
    });
  };
  l.prototype.D = function() {
    var y = n.g("folders_div");
    a: {
      var C = this.i, u = n.g("itemPopup");
      u.classList.remove("chosen");
      u.classList.add("nodisplay");
      try {
        var G = w(C, P, 0);
        break a;
      } catch (L) {
        alert("error : " + L);
      }
      G = void 0;
    }
    y.innerHTML = G;
    F && (n.g("folders_div").querySelector(".items").style.marginLeft = "-14px");
  };
  l.prototype.F = function(y) {
    0 <= this.selected && n.g("ai_" + this.selected).querySelector("span.itemName").classList.remove("chosen");
    this.selected = y;
    0 <= y && n.g("ai_" + this.selected).querySelector("span.itemName").classList.add("chosen");
  };
  l.prototype.Y = function() {
    this.l[0] = 0;
    this.s(0);
  };
  l.prototype.s = function(y) {
    for (var C = this.i.ps[y]; 0 != C;) {
      this.l[C] = y, 0 < this.i.ps[C] && this.s(C), C = this.i.pn[C];
    }
  };
  l.prototype.$ = function(y, C) {
    for (var u = y; 0 < u;) {
      if (u = this.l[u], u === C) {
        return !0;
      }
    }
    return !1;
  };
  l.prototype.V = function(y) {
    for (var C = this.i.f, u = ""; 0 != y;) {
      u = C[y] + "/" + u, y = this.l[y];
    }
    return xx.vars.docPath + u;
  };
});
}).call(this);
